tsx<br>import React, { useState } from 'react';<br><br>const AudioRecorder: React.FC = () => {<br>  const [recording, setRecording] = useState(false);<br>  const [audioUrl, setAudioUrl] = useState<string | null>(null);<br>  let mediaRecorder: MediaRecorder | null = null;<br>  let chunks: Blob[] = [];<br><br>  const startRecording = async () => {<br>    try {<br>      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });<br>      mediaRecorder = new MediaRecorder(stream);<br>      mediaRecorder.ondataavailable = (event) => {<br>        chunks.push(event.data);<br>      };<br>      mediaRecorder.onstop = () => {<br>        const blob = new Blob(chunks, { type: 'audio/webm' });<br>        const url = URL.createObjectURL(blob);<br>        setAudioUrl(url);<br>        chunks = [];<br>      };<br>      mediaRecorder.start();<br>      setRecording(true);<br>      console.log('Recording started');<br>    } catch (error: any) {<br>      console.error(error);<br>      let message = 'Unknown error accessing microphone';<br>      if (error.name === 'NotAllowedError') {<br>        message = 'Microphone access denied. Allow it in site settings, reload, and tap Start again.';<br>      } else if (error.name === 'NotSecureContext') {<br>        message = 'Requires HTTPS. Test on a secure URL.';<br>      } else if (error.message) {<br>        message = error.message;<br>      }<br>      alert(message);<br>    }<br>  };<br><br>  const stopRecording = () => {<br>    if (mediaRecorder && recording) {<br>      mediaRecorder.stop();<br>      mediaRecorder.stream.getTracks().forEach(track => track.stop());<br>      setRecording(false);<br>    }<br>  };<br><br>  return (<br>    <div><br>      <button onClick={startRecording} disabled={recording}><br>        Start Recording<br>      </button><br>      <button onClick={stopRecording} disabled={!recording}><br>        Stop Recording<br>      </button><br>      {audioUrl && (<br>        <audio controls src={audioUrl} /><br>      )}<br>    </div><br>  );<br>};<br><br>export default AudioRecorder;<br>
